.envelope-screen {
  position: relative;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: #F7EEEF;
  font-family: 'Manrope', sans-serif;
  overflow: hidden;
}

/* Dark mode styles 
.dark .envelope-screen {
  background-color: #211111;
}
  */

/* Header */
.envelope-header {
  display: flex;
  justify-content: flex-end;
  width: 100%;
  padding: 1.5rem;
  z-index: 20;
}

.close-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.5);
  transition: background-color 0.3s ease;
  border: none;
  cursor: pointer;
}

/*
.dark .close-button {
  background-color: rgba(0, 0, 0, 0.2);
}
*/
.close-button:hover {
  background-color: rgba(243, 244, 246, 1);
}

/*
.dark .close-button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}*/

.close-button .material-symbols-outlined {
  color: #9ca3af;
  font-size: 1.5rem;
}

/* Main Content */
.envelope-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 0 1.5rem;
  position: relative;
  z-index: 10;
}

/* Envelope Container */
.envelope-container {
  position: relative;
  width: 100%;
  max-width: 20rem;
  aspect-ratio: 4/3;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  perspective: 1000px;
  margin: 0 auto;
}

/* Envelope Body */
.envelope-body {
  position: relative;
  width: 100%;
  height: 100%;
  background-color: rgb(253, 234, 235);
  border-radius: 0.75rem;
  overflow: hidden;
  transition: transform 0.5s ease-out;
  box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.04), 
              0 10px 10px -5px rgba(0, 0, 0, 0.04);
  max-width: 320px;
  max-height: 240px;
}

/*
.dark .envelope-body {
  background-color: #2a1a1a;
  border-color: rgba(31, 41, 55, 0.8);
}
  */

/* Envelope Pattern */
.envelope-pattern {
  position: absolute;
  inset: 0;
  opacity: 0.03;
  background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
  mix-blend-mode: multiply;
  pointer-events: none;
}

/*
.dark .envelope-pattern {
  opacity: 0.05;
  mix-blend-mode: overlay;
}
  */

/* Envelope Folds */
.envelope-fold-bottom {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 0;
  border-left: 10rem solid transparent;
  border-right: 10rem solid transparent;
  border-bottom: 7.55rem solid #FCDFE0;
  z-index: 10;
  border-radius: 12px;
}

/*
.dark .envelope-fold-bottom {
  border-bottom-color: rgba(255, 255, 255, 0.05);
}*/

.envelope-fold-left {
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  border-top: 7.5rem solid transparent;
  border-left: 10rem solid rgb(251, 212, 214);
  border-bottom: 7.5rem solid transparent;
  z-index: 10;
  pointer-events: none;
  border-radius: 12px;
}

/*

.dark .envelope-fold-left {
  border-left-color: rgba(255, 255, 255, 0.05);
}

*/

.envelope-fold-right {
  position: absolute;
  top: 0;
  right: 0;
  width: 0;
  height: 100%;
  border-top: 7.5rem solid transparent;
  border-right: 10rem solid rgb(251, 212, 214);
  border-bottom: 7.5rem solid transparent;
  z-index: 10;
  pointer-events: none;
  border-radius: 12px;
}

/*

.dark .envelope-fold-right {
  border-right-color: rgba(255, 255, 255, 0.05);
}

*/

/* Envelope Flap */
.envelope-flap {
  position: absolute;
  top: 1px;
  left: 0;
  width: 0;
  height: 0;
  border-left: 10rem solid transparent;
  border-right: 10rem solid transparent;
  border-top: 8.125rem solid rgb(253, 234, 235);
  transform-origin: top;
  transition: transform 0.7s ease-in-out;
  z-index: 20;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
  border-radius: 12px;
}



.envelope-open .envelope-flap {
  transform: rotateX(180deg);
}

/* Envelope Seal */
.envelope-seal {
  position: absolute;
  top: -1px;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  background-color: #ea2a33;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 6px -1px rgba(234, 42, 51, 0.3);
  z-index: 30;
  transition: transform 0.3s ease;
}



.envelope-open .envelope-seal{
  transform: translate(-50%, -50%);
  opacity: 0;
  transition: 1s ease;
}

.envelope-seal .material-symbols-outlined {
  color: white;
  font-size: 1.5rem;
}

/* Letter Preview */
.letter-preview {
  position: absolute;
  inset: 1rem;
  background-color: #f9f9f9;
  border-radius: 0.5rem;
  box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.7s ease 0.1s;
  pointer-events: none;
}


/*
.dark .letter-preview {
  background-color: #1f1f1f;
}*/

.letter-preview p {
  font-size: 0.75rem;
  color: #9ca3af;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* Interaction Prompt */
.interaction-prompt {
  margin-top: 3rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  animation: pulse 2s infinite;
}

.interaction-prompt h3 {
  color: #111827;
  letter-spacing: 0.1em;
  font-size: 1.125rem;
  font-weight: 300;
  opacity: 1;
}


/*
.dark .interaction-prompt h3 {
  color: #f9fafb;
}*/

.tap-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1.5rem;
  border-radius: 20px;
  background-color: transparent;
  color: #ea2a33;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.05em;
  border: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
  background-color: rgba(234, 42, 51, 0.05);
}

.tap-button .material-symbols-outlined {
  font-size: 1.25rem;
  color: #ea2a33
}

/* Footer */
.envelope-footer {
  width: 100%;
  padding: 1.5rem 1.5rem 2rem;
  display: flex;
  justify-content: center;
}

.envelope-footer p {
  color: #9ca3af;
  font-size: 0.75rem;
  font-weight: 500;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}


/*
.dark .envelope-footer p {
  color: #6b7280;
}*/

/* Animations */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Responsive */
@media (min-width: 640px) {
  .envelope-container {
    max-width: 24rem;
  }
}

.line-round-heart{
    border: 3px solid white;
    border-radius: 50%;
    height: 45px;
    width: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Container needs perspective for 3D depth */
.envelope-container {
  perspective: 1000px;
}

.envelope-body {
  position: relative;
  overflow: visible; /* Changed from hidden to allow flap to rotate out */
  transform-style: preserve-3d;
}

/* The Top Flap */
.envelope-flap {
  position: absolute;
  left: 0;
  width: 0;
  height: 0;
  z-index: 40;
  transform-origin: top;
  transition: transform 0.8s ease-in-out, z-index 0.3s ease-in-out;
  filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1));
}

/* Move Flap behind the letter once opened */
.envelope-open .envelope-flap {
  transform: rotateX(180deg);
  z-index: 0; /* Moves behind the body/letter */
  transition: all 0.3s;
}

/* The Seal - Centered on the tip of the flap triangle */
.envelope-seal {
  /* Maintains its own look but stays attached to flap */
  transform-style: preserve-3d;
  backface-visibility: visible; 
  transition: transform 0.3s ease;
}

/* The Letter Pop-out */
.letter-preview {
  opacity: 1; /* Always opaque but hidden inside */
  z-index: 15;
  transform: translateY(0);
  transition: transform 0.8s ease-in-out 0.2s; /* Delay until flap clears */
}

.envelope-open .letter-preview {
  transform: translateY(-80px); /* Slides the letter UP out of the envelope */
}

/* --- Expansion Logic --- */

.letter-wrapper {
  position: absolute;
  bottom: 10px;
  left: 5%;
  width: 90%;
  height: 80%;
  background-color: white;
  border-radius: 8px;
  z-index: 1; /* Sits behind folds (20) but in front of back (1) */
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  
  /* Transition for sliding up AND expanding */
  transition: 
    transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    width 0.8s ease,
    height 0.8s ease,
    top 0.8s ease,
    left 0.8s ease,
    z-index 0s linear 0.4s; /* Wait for flap to clear before popping on top */
}

/* Step 1: Slide up slightly within the envelope */
.stage-open .letter-wrapper {
  transform: translateY(-60%);
}

/* Step 2: Break out and fill screen */
.stage-expanded .letter-wrapper {
  position: fixed; 
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  transform: translate(0,0);
  z-index: 100;
  border-radius: 0;
}

.inner-component {
  width: 100%;
  height: 100%;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  text-align: center;
}

/* Optional: Fade out the envelope once expanded to keep focus clean*/ 
.stage-expanded .envelope-container,
.stage-expanded .envelope-header,
.stage-expanded .envelope-footer {
  opacity: 0;
  transition: opacity 0.5s ease;
  pointer-events: none;
}


/* --- Expansion Logic Fixed --- */

.letter-wrapper {
  position: absolute;
  /* Use 50% to anchor the middle of the letter to the middle of the envelope */
  top: 50%;
  left: 50%;
  width: 90%;
  height: 80%;
  background-color: white;
  border-radius: 8px;
  z-index: 1;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  
  /* Initial state: Centered inside envelope body */
  transform: translate(-50%, -50%); 

  transition: 
    transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    width 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    height 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    left 0.8s ease,
    top 0.8s ease,
    z-index 0s linear 0.4s;
}

/* Step 1: Slide up while STAYING centered horizontally */
.stage-open .letter-wrapper {
  /* Move up (-110% pulls it out of the envelope) but keep X at -50% */
  transform: translate(-50%, -110%);
}

/* Step 2: Symmetrical expansion to fill screen */
.stage-expanded .letter-wrapper {
  position: fixed; 
  top: 50%;
  left: 50%;
  /* Keep it locked to the screen center */
  transform: translate(-50%, -50%);
  width: 100vw;
  height: 100vh;
  z-index: 100;
  border-radius: 0;
}

/* Ensure the text container fills the now-fullscreen wrapper */
.inner-component {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  box-sizing: border-box;
  text-align: center;
}

/* Clean up: Hide the envelope behind the expanded letter */
.stage-expanded .envelope-container {
  opacity: 0;
  transition: opacity 0.4s ease;
}


/* This class wraps your <Message /> component */
.message-container-fade {
  /* opacity 0 ensures it's invisible before the animation starts */
  opacity: 0; 
  animation: revealLongMessage 0.4s ease-out forwards;
  width: 100%;
  height: 100vh;
  background-color: white; /* Matches the letter-wrapper background */
}

@keyframes revealLongMessage {
  0% {
    opacity: 0;
    transform: scale(0.95); /* Starts slightly smaller for a "growing" effect */
  }
  100% {
    opacity: 1;
    transform: scale(1); /* Settles at full size */
  }
}